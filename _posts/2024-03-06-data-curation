---
layout: post
title:  "Curating Premier League Data"
date: 2024-03-06
description: A look into how I gathered information on the top 250 players in the English Premier League
image: "/assets/img/premier-league.jpg"
display_image: false  # change this to true to display the image below the banner 
---
<p class="intro"><span class="dropcap">T</span>his post will dive into how I created a data set of EPL data using web scraping via Selenium. I gathered data on individual players including their name, skill level potential, position, and estimated transfer value. Follow along this article if you want to curate a similar data set!</p>


## Introduction

I am a huge fan of the English Premier League (also called EPL or "The Prem"), which is widely recognized as the [top league](https://www.globalfootballrankings.com/) for soccer (or “football” if you’re from outside the US) in the world. One of the biggest events that happens each year in the EPL isn’t actually a game; rather, it is the transfer window (in other sports, this may be known as the trade deadline or trade window). One of the biggest talking points throughout the season is which players will get transferred to where.

<figure>
	<img src="{{site.url}}/{{site.baseurl}}/assets/img/prem-poster.jpg" alt=""> 
	<figcaption>The Prem is also the most viewed soccer league in the world</figcaption>
</figure>


### Why This Data Set?

My obsession with EPL has led me to wonder about how much the top players’ Estimated Transfer Values (ETVs) are (how much money players are worth), and also what other variables are correlated with ETV. Keep in mind the date that this article is being written (March 6, 2024). I want to find the answers to the following questions:

1. What is the average ETV of the top 250 players in the league (measured by ETV)?
2. What’s the correlation between skill and ETV?
3. What are the most popular positions of the top 250 players in the league?


### Finding the Source

To find answers to these questions, I turned to [FootballTransfers](https://www.footballtransfers.com/us), a public, multi-language transfers source in the soccer world. They deliver accurate, algorithmically-driven valuations of players all over the world.

<figure>
	<img src="{{site.url}}/{{site.baseurl}}/assets/img/football-transfers.png" alt=""> 
	<figcaption>FootballTransfers delivers valuations of players, transfer news, and articles about the soccer world</figcaption>
</figure>

This post will not dive into the specific answers to these questions of interest; that will be done in a later post. Rather, it will focus on how I was able to gather data from FootballTransfers to perform an EDA in the future.


## Data Collection

### Tools

<figure>
	<img src="{{site.url}}/{{site.baseurl}}/assets/img/selenium.webp" alt=""> 
</figure>

I used Python and Selenium to gather this data. While Selenium can be used on several different browsers, I used the Chrome WebDriver. For a review of Selenium, including what it is and how it works, consider reading [this article](https://www.browserstack.com/guide/selenium-webdriver-tutorial#:~:text=in%20Selenium%204%3F-,What%20is%20Selenium%20WebDriver%3F,language%20to%20create%20test%20scripts.) from BrowserStack.


### Step 1: Find the Data

We need to first navigate to where the Premier League players are on the FootballTransers website. After clicking on the "Players" tab at the top of the page, you will change the "Leagues & Cups" filter to "Premier League."

<figure>
	<img src="{{site.url}}/{{site.baseurl}}/assets/img/prem-players.png" alt=""> 
	<figcaption>Players > Filters > Leagues & Cups > Premier League will yield this table</figcaption>
</figure>

This will show us 21 pages of players, with 25 on each, ranked by their estimated transfer value (highest first).


### Step 2: Inspect Page

The next step is learn how the page is set up, so that we can begin scraping data from it.

<figure>
	<img src="{{site.url}}/{{site.baseurl}}/assets/img/player-table.png" alt=""> 
	<figcaption>This is the container for all the players' information</figcaption>
</figure>

Here we can see the part of the page that contains the information for all players. This will be necessary later to create an object from which we can iteratively extract data player-by-player.

<figure>
	<img src="{{site.url}}/{{site.baseurl}}/assets/img/player-info.png" alt=""> 
	<figcaption>This holds the player name and position</figcaption>
</figure>

Here we can see the part of the page that contains the player's name and position. Just as before, we will use this shortly to extract these variables.

<figure>
	<img src="{{site.url}}/{{site.baseurl}}/assets/img/skill-pot.png" alt=""> 
	<figcaption>This has the player's skill and potential</figcaption>
</figure>

This is what will allow us to extract the player's skill level and potential. It is the second to last variable which we will be extracting.

<figure>
	<img src="{{site.url}}/{{site.baseurl}}/assets/img/plaer-etv.png" alt=""> 
	<figcaption>This has the player's ETV</figcaption>
</figure>

Finally, the last variable which we will scrape from this website is the player's Estimated Transfer Value (ETV).


### Step 3: Find Information for One Player


### Step 4: Build For Loop


### Ethics

